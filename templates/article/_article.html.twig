<div class="card mb-4">
 {% if article.artFilename %}
        {#<img src="{{ vich_uploader_asset(property,'imageFile') | imagine_filter('thumb') }}" alt="card-img-top" style="width: 100%; height: auto;">
   #}
    <img src="/images/properties/{{ article.artFilename }}" alt="card-img-top" style="width:100%; height:400px;">
   {% else %}
     <img src="{{'/images/properties/empty.jpg'}}" alt="card-img-top" style="width: 100%; height: auto;">
    {% endif %}
    <div class="card-body">
        <a href="{{path('product',{'id': article.id})}}" class="card-title text-danger text-center"> {{ article.artDescription }} </a>
       <a href="{{path('article_like',{'id' : article.id}) }}" class="btn btn-link text-center"> 
       {% if app.user and article.isLikedBy(app.user) %}
     <i class="fas fa-thumbs-up" style="font-size:38px;"></i>
       {% else %}
           <i class="far fa-thumbs-up " style="font-size:38px;"></i>
           
       {% endif %} 
        <span class="text-center"> {{article.artcileLikes | length}} </span> </a>
<a href="{{path('panier_add',{'id': article.id})}}" class="btn btn-success float-right" > <i class="fal fa-shopping-cart"> </i>ADD </a>
       
           {# <a href="{{ path('property.show', {'id': article.id}) }}"> 
                
            </a> #}
        
        {# <p class="card-text">{{ property.surface }} mÂ² - {{ property.city }} ({{ property.postalCode }})</p>
        <div class="text-primary" style="font-size:2rem; font-weight: bold;">
            {{ property.formattedPrice }} DT
        </div>
        #}
    </div>
</div>
  {% block javascripts %}
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
    function OnClickBtnLike(event){
        event.preventDefault();
        const url= this.href ;
        const spanCount = this.querySelector('span.text-center');
        const icon = this.querySelector('i');

        axios.get(url).then(function(response){
            // console.log(response); 
            let likes = response.data.likes ; 
            spanCount.textContent = likes ;
            if(icon.classList.contains('fas')){
                icon.classList.replace('fas','far') ;
            }
            else{
                icon.classList.replace('far','fas') ;
            }
        }).catch(function(error){
            if(error.response.status === 403){
                window.alert("you Have to Connect First !!!");
            }
        });

    }
    document.querySelectorAll('a.text-center').forEach(function(link){
        link.addEventListener('click',OnClickBtnLike);
    });



    </script>
         
    {% endblock %}
